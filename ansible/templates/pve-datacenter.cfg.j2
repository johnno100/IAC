# ansible/templates/pve-datacenter.cfg.j2
# Proxmox VE datacenter configuration
# Generated by Ansible on {{ ansible_date_time.date }}

keyboard: us
language: en
banner: 
css: 
http_proxy: {{ http_proxy | default('') }}
console: kvm
registration_key: 
email_from: {{ admin_email | default('root@localhost') }}
http_port: 8006
min_quorum: 1
# HA settings
{% if ha_enabled | default(false) %}
ha: 1
{% else %}
ha: 0
{% endif %}

# Storage replication configuration
{% if storage_replication | default(false) %}
storage-replication: 1
{% else %}
storage-replication: 0
{% endif %}

# VM migration settings
migration: secure=1,network={{ cluster_network | default('10.10.10.0/24') }}

{% if next_id is defined %}
# Next ID settings for VM/CT creation
next-id: {{ next_id }}
{% endif %}

# Cluster options
{% if cluster_name is defined %}
cluster-name: {{ cluster_name }}
{% endif %}

# Backup retention
{% if backup_retention_days is defined %}
backup-retention: {{ backup_retention_days }}
{% endif %}

# Security settings
{% if require_2fa | default(false) %}
2fa-strict: 1
{% else %}
2fa-strict: 0
{% endif %}