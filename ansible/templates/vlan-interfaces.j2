# ansible/templates/vlan-interfaces.j2
# VLAN interfaces configuration
# Generated by Ansible

{% for vlan in vlans %}
auto {{ vlan.interface }}.{{ vlan.id }}
iface {{ vlan.interface }}.{{ vlan.id }} inet static
    address {{ vlan.address.split('/')[0] }}
    netmask {{ (vlan.address.split('/')[1] | int == 24) | ternary('255.255.255.0', (vlan.address.split('/')[1] | int == 16) | ternary('255.255.0.0', '255.0.0.0')) }}
    vlan-raw-device {{ vlan.interface }}
{% endfor %}